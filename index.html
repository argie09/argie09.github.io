<html>
<head>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
	<style>
		body {
			background-color: #000;
			height: 100%;
		}
		h3 {
			color: #fff;
			text-align: center;
		}
		.videoWrapper {
			position: relative;
			padding-bottom: 56.25%; /* 16:9 */
			padding-top: 25px;
			height: 0;
		}
		.videoWrapper iframe {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
		}
	</style>
</head>
<body>
	<script>
		function getUrlVars() {
		    var vars = {};
		    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
		        vars[key] = value;
		    });
		    return vars;
		}
		
		function getUrlParam(parameter, defaultvalue){
		    var urlparameter = defaultvalue;
		    if(window.location.href.indexOf(parameter) > -1){
		        urlparameter = getUrlVars()[parameter];
		        }
		    return urlparameter;
		}
		// This code loads the Youtube IFrame Player API code asynchronously.
		var tag = document.createElement('script');
		tag.src = "https://www.youtube.com/iframe_api";
		var firstScriptTag = document.getElementsByTagName('script')[0];
		firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

		var players = [];
		var react = getUrlParam('react',null);
		var to = getUrlParam('to',null);
		var start = getUrlParam('t',null);

		function onYouTubeIframeAPIReady() {
			addPlayers();
		}

		function addPlayers() {
			if (react && to && start) {
				addPlayer(0,'player-1',react);
				addPlayer(1,'player-2',to);
			} else alert("Parameters missing!"); //show link generator
		}

		function addPlayer(idx,element,videoId) {
			players[idx] = new YT.Player(element, {
					height: '100%',
					width: '100%',
					videoId: videoId,
					events: {
					'onReady': onPlayerReady,
					'onStateChange': onPlayerStateChange
				}
			});
		}

		// The API will call this function when the video player is ready.
		function onPlayerReady(event) {
			if (event.target.a.id === 'player-1') {
				event.target.playVideo();
			}
		}

		// The API calls this function when the player's state changes.
		function onPlayerStateChange(event) {
			if (event.data == YT.PlayerState.PAUSED && players[0].getCurrentTime() >= start) {
				if (event.target.a.id === 'player-1') {
					players[1].pauseVideo();
				} else players[0].pauseVideo();
			} else if (event.data == YT.PlayerState.PLAYING && players[0].getCurrentTime() >= start && players[0].getPlayerState() != YT.PlayerState.ENDED && players[0].getPlayerState() != YT.PlayerState.UNSTARTED) {
				if (event.target.a.id === 'player-1') {
					players[1].playVideo();
				} else players[0].playVideo();
			}
		}

		var progressTracker = setInterval(progress, 1000);

		function progress() {
		    if (players[0].getCurrentTime() >= start && players[0].getCurrentTime() < start+players[1].getDuration()) {
		    	players[1].seekTo(players[0].getCurrentTime()-start,true);
		    	//players[1].playVideo();
		    	clearInterval(progressTracker);
		    }
		}
    </script>
	<div id="videos">
		<div class="row no-gutters h-100">
			<div class="col-md my-auto">
				<h3>React</h3>
				<div class="videoWrapper">
		     		<div id="player-1"></div>
		     	</div>
		    </div>
			<div class="col-md my-auto">
		     	<h3>to</h3>
		     	<div class="videoWrapper">
		     		<div id="player-2"></div>
		     	</div>
		    </div>
		</div>
	</div>
</body>
</html>